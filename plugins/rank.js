/**

//â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•//
//                                                                                                      //
//                                ï¼·ï¼¨ï¼¡ï¼´ï¼³ï¼¡ï¼°ï¼° ï¼¢ï¼¯ï¼´ï¼ï¼­ï¼¤ ï¼¢ï¼¥ï¼´ï¼¡                                   //
//                                                                                                      // 
//                                         ï¼¶ï¼š1ï¼2ï¼2                                                   // 
//                                                                                                      // 
//            â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—         â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—                        //
//            â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—                       //
//            â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘                       //
//            â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘                       //
//            â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•                       //
//            â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•šâ•â•â•â•â•â•â•    â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•                        //
//                                                                                                      //
//                                                                                                      //
//                                                                                                      //
//â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•//

CURRENTLY RUNNING ON BETA VERSION!!
*
   * @project_name : Suhail-Md
   * @author : Suhail Tech Info
   * @youtube : https://www.youtube.com/c/@SuhailTechInfo
   * @infoription : Suhail-Md ,A Multi-functional whatsapp user bot.
   * @version 1.2.2 
*
   * Licensed under the  GPL-3.0 License;
* 
   * â”Œâ”¤Created By Suhail Tech Info.
   * Â© 2023 Suhail-Md âœ­ â›¥.
   * plugin date : 10/6/2023
* 
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
**/
let bots = false;
const { 
	smd, 
	botpic,
	send,
	Config, 
	tlang, 
	sleep,
	smdBuffer,
	prefix,
	bot_
	} = require('../lib')
const Levels = require("discord-xp");
var isLvl ;
async function levelss (){
    try{ 
       if(isMongodb)(
		isLvl = await Levels.setURL(mongodb || "mongodb://uwrr2obvrb4kbwnrvimy:rbgieh8nfk7EylXCh2D@byg4ii8uzy5rro8bcdfu-mongodb.services.clever-cloud.com:2008/byg4ii8uzy5rro8bcdfu")
        )
    }catch(e){}
} 
levelss()


//============================================================================
let utd = false;

smd({
	pattern: "levelup",
	desc: "turn On/Off auto levelup",
	fromMe : true,
	category: "level",
use:"<on/off>",
	filename: __filename,
},
async(message,text)=>{
try{
	if(!global.isMongodb) return await message.reply(message.isCreator? `*_Add MONGODB_URI to use these cmds_*`:`*_Please ask my Owner to add MONGODB_URI!_*`)
let bgmm = await bot_.findOne({ id: `bot_${message.user}` }) || await bot_.new({id: `bot_${message.user}` });
let toggle = text.toLowerCase().split()[0].trim();
utd = true;
if (toggle === 'on'|| toggle === 'enable' || toggle ==='act') {
if(bgmm.levelup === 'true') return await message.reply("*levelup already enabled!*");
await bot_.updateOne({ id: `bot_${message.user}` }, { levelup: 'true' });
return await message.reply("*levelup Succesfully enabled*");
}else if (toggle === 'off'|| toggle === 'disable' || toggle ==='deact') {
if(bgmm.levelup === 'false') return await message.reply("*levelup already disabled*");
await bot_.updateOne({ id: `bot_${message.user}` }, { levelup: 'false' });
return await message.reply("*levelup Succesfully deactivated*");
} else return await message.send(`*_Use on/off to enable/disable levelup!_*`)
}catch(e){ await message.error(`${e}\n\nCommand: levelup `,e)   }

})

















smd({
            cmdname: "profile",
            info: "Shows profile of user.",
            type: "level",
			use:"<@user>",
            filename: __filename,
        },
        async(message) => {
          try{       
            if(!global.isMongodb) return await message.reply(message.isCreator? `*_Add MONGODB_URI to use these cmds_*`:`*_Please ask my Owner to add MONGODB_URI!_*`)
            let meh = message.sender;
            if(message.isCreator){ meh = message.reply_message ? message.reply_message.sender : message.mentionedJid[0] ? message.mentionedJid[0] : message.sender || message.sender; }
            
            var bio = await message.bot.fetchStatus(meh);
            var bioo = bio.status;
           
            const userq = await Levels.fetch(meh, "RandomXP");
            const lvpoints = userq.level;
            var role = "GODâœ¨";
             if (lvpoints <=  2) { var role = "ğŸ³Citizen"; } 
	else if (lvpoints <=  4) { var role = "ğŸ‘¼Baby Wizard"; } 
	else if (lvpoints <=  6) { var role = "ğŸ§™â€â™€ï¸Wizard";  } 
	else if (lvpoints <=  8) { var role = "ğŸ§™â€â™‚ï¸Wizard Lord"; }
	else if (lvpoints <= 10) { var role = "ğŸ§šğŸ»Baby Mage";  } 
	else if (lvpoints <= 12) { var role = "ğŸ§œMage"; } 
	else if (lvpoints <= 14) { var role = "ğŸ§œâ€â™‚ï¸Master of Mage";} 
	else if (lvpoints <= 16) { var role = "ğŸŒ¬Child of Nobel"; } 
	else if (lvpoints <= 18) { var role = "â„Nobel"; }
	else if (lvpoints <= 20) { var role = "âš¡Speed of Elite"; } 
	else if (lvpoints <= 22) { var role = "ğŸ­Elite"; } 
	else if (lvpoints <= 24) { var role = "ğŸ¥‡Ace I"; }
	else if (lvpoints <= 26) { var role = "ğŸ¥ˆAce II"; } 
	else if (lvpoints <= 28) { var role = "ğŸ¥‰Ace Master"; }
	else if (lvpoints <= 30) { var role = "ğŸ–Ace Dominator";} 
	else if (lvpoints <= 32) { var role = "ğŸ…Ace Elite"; }
	else if (lvpoints <= 34) { var role = "ğŸ†Ace Supreme";}
	else if (lvpoints <= 36) { var role = "ğŸ’Supreme I";}
	else if (lvpoints <= 38) { var role = "ğŸ’Supreme Ii";} 
	else if (lvpoints <= 40) { var role = "ğŸ”®Supreme Master";} 
	else if (lvpoints <= 42) { var role = "ğŸ›¡Legend III";} 
	else if (lvpoints <= 44) { var role = "ğŸ¹Legend II";} 
	else if (lvpoints <= 46) { var role = "âš”Legend"; } 
	else if (lvpoints <= 55) { var role = "ğŸ‰Immortal"; }
	
            let ttms = userq.xp / 8;
	var pfp=await message.getpp(meh)
  var naam_ser;try{ naam_ser = await message.bot.getName(meh) } catch{}
            
const profile = `
*Hii ${m.senderName},*

*Here is profile information*
*ğŸ‘¤Username:* ${naam_ser}
*âš¡Bio:* ${bioo}
*ğŸ§©Role:* ${role}
*ğŸLevel:* ${userq.level ||"infinity"}
*ğŸ“¥Total Messages* ${ttms||"infinity"}
*Powered by ${tlang().title}*
`;
            

            message.bot.sendMessage(message.chat, { image: { url: pfp },caption: profile }, { quoted: message });
          }catch(e){ await message.error(`${e}\n\ncommand: profile`,e,`*ERR Can't fetch data!*`) }
        }
    )


//============================================================================
    //---------------------------------------------------------------------------
smd({
            cmdname: "rank",
            info: "Sends rank card of user.",
            type: "level",
			use:"<@user>",
            filename: __filename,
        },
        async(message) => {
          try{
            if(!global.isMongodb) return await message.reply(message.isCreator ? `*_Please add MONGODB_URI to use this feature_*`:`*_Please ask my Owner to add MONGODB_URI!_*`)
            let meh = message.sender;
            if(message.isCreator){ meh = message.reply_message ? message.reply_message.sender : message.mentionedJid[0] ? message.mentionedJid[0] : message.sender || message.sender; }

          
            const userq = await Levels.fetch(meh, "RandomXP");
            const lvpoints = userq.level;
            var role = "GODâœ¨";
           if (lvpoints <=  2) { var role = "ğŸ³Citizen"; } 
	else if (lvpoints <=  4) { var role = "ğŸ‘¼Baby Wizard"; } 
	else if (lvpoints <=  6) { var role = "ğŸ§™â€â™€ï¸Wizard";  } 
	else if (lvpoints <=  8) { var role = "ğŸ§™â€â™‚ï¸Wizard Lord"; }
	else if (lvpoints <= 10) { var role = "ğŸ§šğŸ»Baby Mage";  } 
	else if (lvpoints <= 12) { var role = "ğŸ§œMage"; } 
	else if (lvpoints <= 14) { var role = "ğŸ§œâ€â™‚ï¸Master of Mage";} 
	else if (lvpoints <= 16) { var role = "ğŸŒ¬Child of Nobel"; } 
	else if (lvpoints <= 18) { var role = "â„Nobel"; }
	else if (lvpoints <= 20) { var role = "âš¡Speed of Elite"; } 
	else if (lvpoints <= 22) { var role = "ğŸ­Elite"; } 
	else if (lvpoints <= 24) { var role = "ğŸ¥‡Ace I"; }
	else if (lvpoints <= 26) { var role = "ğŸ¥ˆAce II"; } 
	else if (lvpoints <= 28) { var role = "ğŸ¥‰Ace Master"; }
	else if (lvpoints <= 30) { var role = "ğŸ–Ace Dominator";} 
	else if (lvpoints <= 32) { var role = "ğŸ…Ace Elite"; }
	else if (lvpoints <= 34) { var role = "ğŸ†Ace Supreme";}
	else if (lvpoints <= 36) { var role = "ğŸ’Supreme I";}
	else if (lvpoints <= 38) { var role = "ğŸ’Supreme Ii";} 
	else if (lvpoints <= 40) { var role = "ğŸ”®Supreme Master";} 
	else if (lvpoints <= 42) { var role = "ğŸ›¡Legend III";} 
	else if (lvpoints <= 44) { var role = "ğŸ¹Legend II";} 
	else if (lvpoints <= 46) { var role = "âš”Legend"; } 
	else if (lvpoints <= 55) { var role = "ğŸ‰Immortal"; }

          
          let disc = meh.substring(3, 7);
          var ppuser = await message.getpp(meh)
          var naam_ser;try{ naam_ser = await message.bot.getName(meh) } catch{}
          let ttms = userq.xp / 8;
          
var textr = `*Hii ${tlang().greet} ,ğŸŒŸ ${naam_ser ||"Sir_"}âˆ†${disc}'s* Exp
\n\n*ğŸŒŸRole*: ${role}
*ğŸŸ¢Exp*: ${userq.xp||"infinity"} / ${Levels.xpFor( (userq.level || 0 ) + 1)}
*ğŸ¡Level*: ${userq.level ||"infinity"}
*Total Messages:*- ${ttms || "infinity"}
`;

          
          
          await  message.bot.sendMessage(message.chat, { image: {url :ppuser }, caption: textr, }, { quoted: message });
          }catch(e){ await message.error(`${e}\n\ncommand: rank`,e,`*ERR: Can't fetch data!*`) }
        }
    )
//============================================================================
    //---------------------------------------------------------------------------
smd({
            cmdname: "leaderboard",
            alias: ["deck"],
            info: "To check leaderboard",
            type: "level",
			use:"<@user>",
            filename: __filename,
        },
        async(message) => {
try{
  if(!global.isMongodb) return await message.reply(message.isCreator? `*_Add MONGODB_URI to use these cmds_*`:`*_Please ask my Owner to add MONGODB_URI!_*`)
          
            const fetchlb = await Levels.fetchLeaderboard("RandomXP", 5);
            let leadtext = `
*-------------------------------*
*----â— LeaderBoard â— -----*
*-------------------------------*
\n\n`
            for (let i = 0; i < fetchlb.length; i++) {
                const lvpoints = fetchlb[i].level
                var role = "GODâœ¨";
                           if (lvpoints <=  2) { var role = "ğŸ³Citizen"; } 
	else if (lvpoints <=  4) { var role = "ğŸ‘¼Baby Wizard"; } 
	else if (lvpoints <=  6) { var role = "ğŸ§™â€â™€ï¸Wizard";  } 
	else if (lvpoints <=  8) { var role = "ğŸ§™â€â™‚ï¸Wizard Lord"; }
	else if (lvpoints <= 10) { var role = "ğŸ§šğŸ»Baby Mage";  } 
	else if (lvpoints <= 12) { var role = "ğŸ§œMage"; } 
	else if (lvpoints <= 14) { var role = "ğŸ§œâ€â™‚ï¸Master of Mage";} 
	else if (lvpoints <= 16) { var role = "ğŸŒ¬Child of Nobel"; } 
	else if (lvpoints <= 18) { var role = "â„Nobel"; }
	else if (lvpoints <= 20) { var role = "âš¡Speed of Elite"; } 
	else if (lvpoints <= 22) { var role = "ğŸ­Elite"; } 
	else if (lvpoints <= 24) { var role = "ğŸ¥‡Ace I"; }
	else if (lvpoints <= 26) { var role = "ğŸ¥ˆAce II"; } 
	else if (lvpoints <= 28) { var role = "ğŸ¥‰Ace Master"; }
	else if (lvpoints <= 30) { var role = "ğŸ–Ace Dominator";} 
	else if (lvpoints <= 32) { var role = "ğŸ…Ace Elite"; }
	else if (lvpoints <= 34) { var role = "ğŸ†Ace Supreme";}
	else if (lvpoints <= 36) { var role = "ğŸ’Supreme I";}
	else if (lvpoints <= 38) { var role = "ğŸ’Supreme Ii";} 
	else if (lvpoints <= 40) { var role = "ğŸ”®Supreme Master";} 
	else if (lvpoints <= 42) { var role = "ğŸ›¡Legend III";} 
	else if (lvpoints <= 44) { var role = "ğŸ¹Legend II";} 
	else if (lvpoints <= 46) { var role = "âš”Legend"; } 
	else if (lvpoints <= 55) { var role = "ğŸ‰Immortal"; }
  var naam_ser;try{ naam_ser = await message.bot.getName(fetchlb[i].userID) } catch{naam_ser = fetchlb[i].userID?.split("@")[0] || "Unknown"}
leadtext += `*${i + 1}â—Name*: ${naam_ser}
*â—Level*: ${fetchlb[i].level}
*â—Points*: ${fetchlb[i].xp}
*â—Role*: ${role}
*â—Total messages*: ${fetchlb[i].xp / 8}
\n`;
            }
            await message.reply(leadtext)
   }catch(e){ await message.error(`${e}\n\ncommand: leaderboard`,e,`*Can't fetch data, make sure MONGODB_URI added!!*`) }
        }
    )

//============================================================================
//============================================================================


	smd({ on: "text" }, async(message) => {



    try{

		if(!bots || utd ){ bots = await bot_.findOne({id: `bot_${msg.user}` }); utd=false} 
    if(!bots || !global.isMongodb) return 
	
	    const randomXp = 8;
	    let usrname = message.senderName
	    const hasLeveledUp = await Levels.appendXp(message.sender, "RandomXP", randomXp);
	    if (hasLeveledUp){
		    const sck1 = await Levels.fetch(message.sender, "RandomXP");
		    const lvpoints = sck1.level;
		    var role = "GOD";
			  if (lvpoints <=  2) { var role = "ğŸ³Citizen";  } 
		    else if (lvpoints <=  4) { var role = "ğŸ‘¼Baby Wizard"; } 
		    else if (lvpoints <=  6) { var role = "ğŸ§™â€â™€ï¸Wizard"; } 
		    else if (lvpoints <=  8) { var role = "ğŸ§™â€â™‚ï¸Wizard Lord"; } 
		    else if (lvpoints <= 10) { var role = "ğŸ§šğŸ»Baby Mage"; } 
		    else if (lvpoints <= 12) { var role = "ğŸ§œMage"; } 
		    else if (lvpoints <= 14) { var role = "ğŸ§œâ€â™‚ï¸Master of Mage";} 
		    else if (lvpoints <= 16) { var role = "ğŸŒ¬Child of Nobel";  } 
		    else if (lvpoints <= 18) { var role = "â„Nobel";} 
		    else if (lvpoints <= 20) { var role = "âš¡Speed of Elite"; }
		    else if (lvpoints <= 22) { var role = "ğŸ­Elite"; } 
		    else if (lvpoints <= 24) { var role = "ğŸ¥‡Ace I"; } 
		    else if (lvpoints <= 26) { var role = "ğŸ¥ˆAce II"; } 
		    else if (lvpoints <= 28) { var role = "ğŸ¥‰Ace Master"; }
		    else if (lvpoints <= 30) { var role = "ğŸ–Ace Dominator"; }
		    else if (lvpoints <= 32) { var role = "ğŸ…Ace Elite"; }
		    else if (lvpoints <= 34) { var role = "ğŸ†Ace Supreme";} 
		    else if (lvpoints <= 36) { var role = "ğŸ’Supreme I"; }
		    else if (lvpoints <= 38) { var role = "ğŸ’Supreme Ii"; } 
		    else if (lvpoints <= 40) { var role = "ğŸ”®Supreme Master"; } 
		    else if (lvpoints <= 42) { var role = "ğŸ›¡Legend III"; } 
		    else if (lvpoints <= 44) { var role = "ğŸ¹Legend II"; } 
		    else if (lvpoints <= 46) { var role = "âš”Legend"; } 
		    else if (lvpoints <= 55) { var role = "ğŸ‰Immortal"; }
		    

		    if(bots.levelup && bots.levelup ==="true" ) {
			    await message.bot.sendUi(message.chat,{
			caption: `
â•”â•â•â•â•â—‡
â•‘ *Wow,Someone just*
â•‘ *leveled Up huhâ­*
â•‘ *ğŸ‘¤Name*: ${message.pushName}
â•‘ *ğŸLevel*: ${sck1.level}ğŸ­
â•‘ *ğŸ›‘Exp*: ${sck1.xp} / ${Levels.xpFor((sck1.level || 0 ) + 1)}
â•‘ *ğŸ“Role*: *${role}*
â•‘ *EnjoyğŸ¥³*
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â• `}, { quoted: message });
		    }
	    }
    }catch{}
	})
	




